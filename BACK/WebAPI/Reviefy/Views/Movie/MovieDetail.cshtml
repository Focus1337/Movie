@using LinqToDB.Reflection
@using LinqToDB
@{
    ViewBag.Title = ViewBag.Movie.Title  + " - Movies";
    Layout = "_Master";
}

<body>

    <!-- =============== START OF WRAPPER =============== -->
    <div class="wrapper">
    
        <!-- =============== START OF MOVIE DETAIL INTRO =============== -->
        <section class="movie-detail-intro overlay-gradient ptb100"
            style="background: url(@ViewBag.MoviePhoto.Background)">
        </section>
        <!-- =============== END OF MOVIE DETAIL INTRO =============== -->
    

        <!-- =============== START OF MOVIE DETAIL INTRO 2 =============== -->
        <section class="movie-detail-intro2">
            <div class="container">
                <div class="row">
                    <div class="col-md-12">

                        <div class="movie-poster">
                            <img src="@ViewBag.Movie.PosterPath"
                                alt="" width="300">
                        </div>

                        <div class="movie-details">
                            <h3 class="title">@ViewBag.Movie.Title</h3>

                            <ul class="movie-subtext">
                                <li>@ViewBag.Movie.Duration min</li>
                                <li>@ViewBag.Movie.Genre</li>
                                <li>@ViewBag.Movie.ReleaseDate.ToString("d") (@ViewBag.Movie.Country)</li>
                            </ul>

                            <a href="@ViewBag.Movie.TrailerPath"
                                class="btn btn-main btn-effect">trailer</a>

                            <div class="rating mt10">
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star-o"></i>
                                <span>@ViewBag.Movie.Rating / 10</span>
                            </div>
                        </div>

                        <div class="clearfix"></div>

                    </div>
                </div>
            </div>
        </section>
        <!-- =============== End OF MOVIE DETAIL INTRO 2 =============== -->


        <!-- =============== START OF MOVIE DETAIL MAIN SECTION =============== -->
        <section class="movie-detail-main ptb100">
            <div class="container">

                <div class="row">
                    <!-- Start of Movie Main -->
                    <div class="col-lg-8 col-sm-12">
                        <div class="inner pr50">

                            <!-- Storyline -->
                            <div class="storyline">
                                <h3 class="title">Storyline</h3>

                                <p>@ViewBag.Movie.Storyline</p>
                            </div>

                            <!-- Media -->
                            <div class="movie-media mt50">
                                <h3 class="title"> Photos & Videos</h3>

                                <ul class="image-gallery isotope">
                                    <li class="element">
                                        <a href="@ViewBag.MoviePhoto.Photo1">
                                            <img src="@ViewBag.MoviePhoto.Photo1" class="img-responsive" alt="">
                                        </a>
                                    </li>

                                    <li class="element">
                                        <a href="@ViewBag.MoviePhoto.Photo2">
                                            <img src="@ViewBag.MoviePhoto.Photo2" class="img-responsive" alt="">
                                        </a>
                                    </li>

                                    <li class="element">
                                        <a href="@ViewBag.MoviePhoto.Photo3">
                                            <img src="@ViewBag.MoviePhoto.Photo3" class="img-responsive" alt="">
                                        </a>
                                    </li>

                                    <li class="element">
                                        <a href="@ViewBag.MoviePhoto.Photo4">
                                            <img src="@ViewBag.MoviePhoto.Photo4" class="img-responsive" alt="">
                                        </a>
                                    </li>

                                    <li class="element">
                                        <a href="@ViewBag.MoviePhoto.Photo5">
                                            <img src="@ViewBag.MoviePhoto.Photo5" class="img-responsive" alt="">
                                        </a>
                                    </li>

                                    <li class="element">
                                        <a href="@ViewBag.MoviePhoto.Photo6">
                                            <img src="@ViewBag.MoviePhoto.Photo6" class="img-responsive" alt="">
                                        </a>
                                    </li>

                                    <li class="element">
                                        <a href="@ViewBag.MoviePhoto.Photo7">
                                            <img src="@ViewBag.MoviePhoto.Photo7" class="img-responsive" alt="">
                                        </a>
                                    </li>

                                    <li class="element">
                                        <a href="@ViewBag.MoviePhoto.Photo8">
                                            <img src="@ViewBag.MoviePhoto.Photo8" class="img-responsive" alt="">
                                        </a>
                                    </li>

                                    <li class="element">
                                        <a href="@ViewBag.MoviePhoto.Photo9">
                                            <img src="@ViewBag.MoviePhoto.Photo9" class="img-responsive" alt="">
                                        </a>
                                    </li>
                                </ul>

                            </div>

                        </div>
                    </div>
                    <!-- End of Movie Main -->


                    <!-- Start of Sidebar -->
                    <div class="col-lg-4 col-sm-12">
                        <div class="sidebar">

                            <!-- Start of Details Widget -->
                            <aside class="widget widget-movie-details">
                                <h3 class="title">Details</h3>

                                <ul>
                                    <li><strong>Release date: </strong>@ViewBag.Movie.ReleaseDate.ToString("d")</li>
                                    <li><strong>Director: </strong>@ViewBag.Movie.Director</li>
                                    <li><strong>Budget: </strong>@ViewBag.Movie.Budget million USD</li>
                                    <li><strong>Country: </strong>@ViewBag.Movie.Country</li>
                                    <li><strong>Language: </strong>@ViewBag.Movie.Language</li>
                                    <li><strong>Production Co: </strong>@ViewBag.Movie.Company</li>
                                </ul>
                            </aside>
                            <!-- End of Details Widget -->

                        </div>
                    </div>
                    <!-- End of Sidebar -->
                </div>

            </div>
        </section>
        <!-- =============== END OF MOVIE DETAIL MAIN SECTION =============== -->


        <!-- =============== START OF RECOMMENDED MOVIES SECTION =============== -->
        <section class="recommended-movies bg-light ptb100">
            <div class="container">

                <!-- Start of Reviews -->
                <div class="comments">
                    <h3 class="title">Reviews (@ViewBag.Reviews.Count)</h3>

                    <ul class="list-unstyled mt30">

                        @foreach(Review review in ViewBag.Reviews)
                        {
                            <li class="media">
                                <div class="review-box">
                                    <img class="img-circle" src="@(((ITable<User>)ViewBag.User).FirstOrDefault(x => x.UserId == review.UserId)?.AvatarPath)" alt="">
                                    <div class="review-box-fix">
                                       
                                        <h4>@(((ITable<User>)ViewBag.User).FirstOrDefault(x => x.UserId == review.UserId)?.Nickname)</h4>
                                        <div class="review-box-rating">
                                            <i class="fa fa-star"></i>
                                            <span>@review.Rating/10</span>
                                        </div>

                                        <div class="review-box-date">
                                            <div class="bloglist-meta">
                                                <i class="fa fa-calendar"></i> @review.ReviewDate.ToString("d")
                                            </div>
                                        </div>

                                        <hr>
                                        <p>@Html.Raw(@review.Text)</p>
                                        <hr>

                                        <div class="review-box-helpfulness">
                                            Review helpfulness:
                                            <a href="#" class="btn">
                                                <i class="fa fa-arrow-up"></i>
                                            </a>
                                            <span>@review.Helpfulness</span>
                                            <a href="#" class="btn">
                                                <i class="fa fa-arrow-down"></i>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        }
                    </ul>

                </div>
                <!-- End of Reviews -->

                <hr class="op-5 mtb50">


                <!-- Start of Review Form -->
                <div class="comment-form">
                    <h3 class="mt-0 mb-1">Add Review</h3>
                    <h3></h3>

                    <form class="row mt30">
                        <div class="form-group col-md-6" style="padding-right: 35%;">
                            <label for="rating-select" class="subtitle">Rating</label>
                            <select name="rating-select" required>
                                <option value="0" selected>Choose rating</option>
                                <option value="1">1 -> Terrible</option>
                                <option value="2">2 -> Bad</option>
                                <option value="3">3 -> Bad</option>
                                <option value="4">4 -> OK</option>
                                <option value="5">5 -> OK</option>
                                <option value="6">6 -> Good</option>
                                <option value="7">7 -> Good</option>
                                <option value="8">8 -> Great</option>
                                <option value="9">9 -> Great</option>
                                <option value="10">10 -> Excellent</option>
                            </select>
                        </div>

                        <div class="form-group col-md-12 m-t-20">
                            <textarea class="form-control" rows="5" placeholder="Review"></textarea>
                        </div>

                        <div class="form-group col-md-12 m-t-20">
                            <button type="submit" class="btn btn-main btn-effect">Submit</button>
                        </div>
                    </form>
                </div>
                <!-- End of Review Form -->

            </div>
        </section>
        <!-- =============== END OF RECOMMENDED MOVIES SECTION =============== -->
    
    </div>
    <!-- =============== END OF WRAPPER =============== -->


    <!-- =============== START OF GENERAL SEARCH WRAPPER =============== -->
    <div class="general-search-wrapper">
        <form class="general-search" role="search" method="get" action="#">
            <input type="text" placeholder="Type and hit enter...">
            <span id="general-search-close" class="ti-close toggle-search"></span>
        </form>
    </div>
    <!-- =============== END OF GENERAL SEARCH WRAPPER =============== -->


    <!-- ===== Start of Back to Top Button ===== -->
    <div id="backtotop">
        <a href="#"></a>
    </div>
    <!-- ===== End of Back to Top Button ===== -->

</body>